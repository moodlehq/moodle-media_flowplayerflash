define(["core/yui"],function(a){var b=[],c=[],d=function(){if((0!=b.length||0!=c.length)&&"undefined"==typeof flowplayer){var a=!1,d=function(){if(!a&&"undefined"!=typeof flowplayer){a=!0;for(var d={url:M.cfg.wwwroot+"/media/player/flowplayerflash/flowplayer/flowplayer.controls-3.2.16.swf.php",autoHide:!0},e=0;e<b.length;e++){var f=b[e];if(f.width>0&&f.height>0)var g={src:M.cfg.wwwroot+"/media/player/flowplayerflash/flowplayer/flowplayer-3.2.18.swf.php",width:f.width,height:f.height};else var g=M.cfg.wwwroot+"/media/player/flowplayerflash/flowplayer/flowplayer-3.2.18.swf.php";flowplayer(f.id,g,{plugins:{controls:d},clip:{url:f.fileurl,autoPlay:!1,autoBuffering:!0,scaling:"fit",mvideo:f,onMetaData:function(a){if(a.mvideo.autosize&&!a.mvideo.resized){if(a.mvideo.resized=!0,"undefined"==typeof a.metaData.width||"undefined"==typeof a.metaData.height)var b=a.width,c=a.height;else var b=a.metaData.width,c=a.metaData.height;var d=300;b<d&&(c=c*d/b,b=d);var e=this._api();e.width=b,e.height=c}}}})}if(0!=c.length){for(var h,d={url:M.cfg.wwwroot+"/media/player/flowplayerflash/flowplayer/flowplayer.controls-3.2.16.swf.php",autoHide:!1,fullscreen:!1,next:!1,previous:!1,scrubber:!0,play:!0,pause:!0,volume:!0,mute:!1,backgroundGradient:[.5,0,.3]},i=0;i<document.styleSheets.length;i++){var j=!1;try{if("undefined"!=typeof document.styleSheets[i].rules)j=document.styleSheets[i].rules;else{if("undefined"==typeof document.styleSheets[i].cssRules)continue;j=document.styleSheets[i].cssRules}}catch(k){continue}if(j){for(var e=0;e<j.length;e++)if(h="",/^\.mp3flowplayer_.*Color$/.test(j[e].selectorText)&&("undefined"!=typeof j[e].cssText?h=j[e].cssText:"undefined"!=typeof j[e].style.cssText&&(h=j[e].style.cssText),""!=h&&/.*color\s*:\s*([^;]+).*/gi.test(h))){h=h.replace(/.*color\s*:\s*([^;]+).*/gi,"$1");var l=j[e].selectorText.replace(/^\.mp3flowplayer_/,"");d[l]=h}j=!1}}for(e=0;e<c.length;e++){var m=c[e];m.small?(d.controlall=!1,d.height=15,d.time=!1):(d.controlall=!0,d.height=25,d.time=!0),flowplayer(m.id,M.cfg.wwwroot+"/media/player/flowplayerflash/flowplayer/flowplayer-3.2.18.swf.php",{plugins:{controls:d,audio:{url:M.cfg.wwwroot+"/media/player/flowplayerflash/flowplayer/flowplayer.audio-3.2.11.swf.php"}},clip:{url:m.fileurl,provider:"audio",autoPlay:!1}})}}}};if(M.cfg.jsrev==-1)var e=M.cfg.wwwroot+"/media/player/flowplayerflash/flowplayer/flowplayer-3.2.13.js";else var e=M.cfg.wwwroot+"/lib/javascript.php?jsfile=/media/player/flowplayerflash/flowplayer/flowplayer-3.2.13.min.js&rev="+M.cfg.jsrev;var f=document.createElement("script");f.setAttribute("type","text/javascript"),f.setAttribute("src",e),f.onload=d,f.onreadystatechange=d,document.getElementsByTagName("head")[0].appendChild(f)}};return a.on("domready",function(){d()}),{add_video_player:function(a,c,d,e,f){b.push({id:a,fileurl:c,width:d,height:e,autosize:f,resized:!1})},add_audio_player:function(a,b,d){c.push({id:a,fileurl:b,small:d})}}});